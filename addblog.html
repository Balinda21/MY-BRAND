<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Blog</title>
  <link rel="stylesheet" href="addblog.css">
</head>
<body>

<div class="modal-wrapper">
  <input type="checkbox" id="modal-toggle" class="modal-toggle">
  <label for="modal-toggle" class="modal-overlay"></label>
  <div class="modal">
    <label for="modal-toggle" class="modal-close"><button><a href="admindashboard.html">X</a></button></label>
    <h2>Add Blog</h2>
    <form class="modal-form" id="blog-form">
      <div class="form-group">
        <label for="picture">Picture Link:</label>
        <input type="text" id="picture" name="picture" required>
      </div>
      <div class="form-group">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>
      </div>
      <div class="form-group">
        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required>
      </div>
      <div class="form-group">
        <label for="description">Description:</label>
        <textarea id="description" name="description" rows="4" required></textarea>
      </div>
      
      <div class="form-group form-actions">
        <button type="submit">Submit</button>
      </div>
    </form>
  </div>
</div>

<div id="blog-cards" class="blog-cards"></div>

<script>
  // Function to generate a unique ID
  function generateUniqueId() {
    return 'blog_' + Date.now(); // Example: blog_1649203846593
  }

  // Function to handle form submission
  document.getElementById('blog-form').addEventListener('submit', function(event) {
    event.preventDefault();

    // Retrieve form data
    var formData = new FormData(this);
    var blogData = {};
    formData.forEach(function(value, key) {
      blogData[key] = value;
    });

    // Add a unique ID to the blog
    blogData.id = generateUniqueId();

    // Store form data in local storage
    var blogs = localStorage.getItem('blogs') ? JSON.parse(localStorage.getItem('blogs')) : [];
    blogs.push(blogData);
    localStorage.setItem('blogs', JSON.stringify(blogs));

    // Reset form
    this.reset();

    // Update blog cards
    updateBlogCards();
  });

  // Function to generate HTML for blog post cards
  function generateBlogCard(blog) {
    var card = document.createElement('div');
    card.classList.add('blog-card');
    card.setAttribute('data-blog-id', blog.id); // Set data attribute for blog ID

    var image = document.createElement('img');
    image.src = blog.picture; // Use the provided image link
    image.alt = 'Blog Picture';
    card.appendChild(image);

    var content = document.createElement('div');
    content.classList.add('card-content');

    var title = document.createElement('h2');
    title.textContent = blog.title;
    content.appendChild(title);

    var date = document.createElement('span');
    date.classList.add('card-date');
    date.textContent = blog.date;
    content.appendChild(date);

    var description = document.createElement('p');
    description.textContent = blog.description;
    content.appendChild(description);

    card.appendChild(content);

    document.getElementById('blog-cards').appendChild(card);
  }

  // Function to update blog cards from local storage
  function updateBlogCards() {
    var blogCardsContainer = document.getElementById('blog-cards');
    blogCardsContainer.innerHTML = '';

    var blogs = localStorage.getItem('blogs') ? JSON.parse(localStorage.getItem('blogs')) : [];
    blogs.forEach(function(blog) {
      generateBlogCard(blog);
    });
  }

  // Call updateBlogCards initially to load existing blogs
  updateBlogCards();
</script>

</body>
</html>
